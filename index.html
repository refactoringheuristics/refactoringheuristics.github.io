<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Recommending Composite Refactorings for Smell Removal: Heuristics and Evaluation</title>   
</head>

<body>        
    <div class="container">
        <div class="page-header" id="title" align="center">
            <h1>Recommending Composite Refactorings for Smell Removal: Heuristics and Evaluation</h1>
            <br/>
        </div>

        This web page presents the replication package of the paper <i>Recommending Composite Refactorings for Smell Removal: Heuristics and Evaluation</i>. <br>               

        <h3 class="page-header" id="abstract">Abstract</h3>

        <p class="text-justify">
        Structural degradation is the process in which quality attributes of a system are negatively impacted. When due attention is not paid to structural degradation, the source code may also become difficult to change. Code smells are recurring structures in the source code that may represent structural degradation. Hence, there are many catalogs and techniques for supporting the removal of code smells through refactoring recommendations, such as a Move Method or a Extract Method. Such recommendations usually consist of single refactorings. However, single refactorings are often not enough for completely removing certain smell occurrences. Moreover, recent studies show that developers most often apply composite refactorings -- i.e., sequences of two or more refactorings -- for removing code smells. Despite showing the importance of performing composite refactorings, existing studies do not provide information on which composite refactoring patterns are recurrent in practice. Therefore, in this work, we conducted an empirical study to extract data from multiple open source systems regarding the composite refactoring practice. This data helped us to find 35 recurring patterns that are effective in removing certain types of code smells. Based on such patterns, we propose a suite of new recommendation heuristics to help developers in applying effective composite refactorings. These heuristics are intended to remove three code smell types, namely Complex Class, Feature Envy, and God Class. After designing the heuristics, we evaluated their effectiveness through a quasi-experiment. This evaluation was conducted with 12 software developers and 9 smelly Java classes. Results indicate that developers considered our heuristics effective or partially effective in more than 93% of the cases. In addition, the evaluation helped us to identify multiple factors that contribute to the acceptance or rejection of the refactoring recommendations. Based on these factors we define new guidelines for the effective recommendation of smell-removal composite refactorings.
        </p>

    </div>
	
    <div class="container">        

        <h3 class="page-header" id="procedures">Detailed Procedures for Finding Smell Removal Patterns</h3>
	<ol>
	<li><strong>Selection of Projects.</strong> We selected a set of Java software projects from Github to analyze. To select them, we followed systematic criteria. We selected projects with (1) different levels of popularity -- based on the number of Github stars, (2) an active issue tracking system, and (3) at least 90% of code written in Java. These criteria allowed us to select 48 heterogeneous projects with a diversity of structure, domain, size and popularity. Details about the projects are available at the <a href="http://refactoringheuristics.github.io/patterns-heuristics.zip">"Composite patterns and heuristics"</a> artifacts.</li>
		
        <li><strong>Detection of Smells and Refactorings.</strong> In this step, we used rule-based detection strategies for code smells. The rules are based on state-of-the-art metrics and thresholds. We selected these rules because they are refinements of traditional rules that are used in previous related studies. The detection of smells is an important step in the identification of the composites that were able to remove smells. For finding refactorings, we opted for the <a href="https://github.com/tsantalis/RefactoringMiner">Refactoring Miner</a> tool. According to previous studies, Refactoring Miner has precision of 98% and recall of 87%. We considered all 14 refactoring types identified by the tool, which represent the most common refactoring types applied by developers.</li>

	<li><strong>Finding Composite Refactorings.</strong> To find composite refactorings we applied a synthesis strategy that is able to identify both temporally-related composites and spatial composites.</li>

	<li><strong>Identifying Removal Patterns.</strong> After finding composite refactorings, we classified them according to their impact on code smells. Such impact could be the persistence (i.e., no effect), introduction, or removal of code smells. Finally, we identified recurrent composite refactoring patterns related to the removal of Feature Envy, God Class, and Complex Class. This identification was based on the frequency with which each pattern resulted in the removal of a smell type. We only selected patterns that resulted in the removal of smells in at least 50% of all occurrences. In this way, we guarantee that the selected patterns have a satisfactory potential for the effective removal of smells.</li>
	</ol>
    </div>

    <div class="container">

        <h3 class="page-header" id="replicationpackage">Replication Package</h3>
	<ul>
		<li><a href="http://refactoringheuristics.github.io/paper.pdf">[Paper]</a></li>
		<li><a href="https://gofile.io/d/AfP1Wx">[Refactorings and Smells]</a></li>
		<li><a href="http://refactoringheuristics.github.io/patterns-heuristics.zip">[Composite patterns and heuristics]</a></li>       
		<li><a href="http://refactoringheuristics.github.io/quasi-experiment.zip">[Quasi-experiment]</a></li>
		<li><a href="http://refactoringheuristics.github.io/qualitative-analysis.zip">[Qualitative Analysis Data]</a></li>
	</ul>
    </div>
</body>

</html>
